<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css"
        integrity="sha384-PDle/QlgIONtM1aqA2Qemk5gPOE7wFq8+Em+G/hmo5Iq0CCmYZLv3fVRDJ4MMwEA" crossorigin="anonymous">
</head>

<body>

<button (click)="calcularTotal()"> PRUUEBAA</button>
<div class="container" *ngIf="roles">
  <div class="card" *ngIf="factura">
    <div class="row">
      <!--Primera Columna-->
      <div class="col-md-6">
        <h5>Datos del Cliente</h5>
        <br>
        
        <form>
          
          
          <div class="form-group row">
            <label for="nombre" class="col-sm-3 col-form-label">Nombre</label>
            <div class="col-sm-6">
              <input
                
                type="text"
                class="form-control"
                id="nombre"
                name="nombre"
                [(ngModel)]="factura.nombre"
                [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado)"
              >
            </div>
          </div>
          <div class="form-group row">
            <label for="cedula" class="col-sm-3 col-form-label">Cedula</label>
            <div class="col-sm-6">
              <input type="text"
                     class="form-control"
                     id="cedula"
                     name="cedula"
                     [(ngModel)]="factura.cedula"
                     [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado) ">
            </div>
          </div>
          
          <div class="form-group row">
            <label for="telefono" class="col-sm-3 col-form-label"> telefono</label>
            <div class="col-sm-6">
              <input type="text"
                     class="form-control"
                     id="telefono"
                     name="telefono"
                     [(ngModel)]="factura.telefono"
                     [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado)">
            </div>
          </div>
          <div class="form-group row">
            <label for="correo" class="col-sm-3 col-form-label">Correo</label>
            <div class="col-sm-6">
              <input type="email"
                     class="form-control"
                     id="correo"
                     name="correo"
                     [(ngModel)]="factura.correo"
                     [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado)">
            </div>
          </div>
          
          <div class="form-group row">
            <label for="fecha" class="col-sm-3 col-form-label">Fecha</label>
            <div class="col-sm-6">
              <input type="date"
                     min="19/02/2019"
                     class="form-control"
                     id="fecha"
                     name="fecha"
                     [(ngModel)]="factura.fecha"
                     [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado)">
            </div>
          </div>
        </form>
        <div>
          <h5>Datos de Factura</h5>
          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Tipo Pago</label>
            <div class="col-sm-6">
              <select name="tipoPago"
                      id="selectOpc"
                      #tipoPagoOpc
                      [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado)">
                <option [value]="'Efectivo'">Efectivo</option>
                <option [value]="'Tarjeta'">Tarjeta</option>
                <option [value]="'Cheque'">Cheque</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <!--Segunda Columna-->
      <div class="col-md-6">
        
        <div class="form-group row">
          <label for="direccion" class="col-sm-3 col-form-label ">Direccion</label>
          <div class="col-sm-6">
            <input type="text"
                   id="direccion"
                   name="direccion"
                   class="form-control"
                   [(ngModel)]="factura.direccion"
                   [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado)"
            >
          </div>
        </div>
        
        <div class="form-group row">
          <label for="estado" class="col-sm-3 col-form-label">Estado</label>
          <div class="col-sm-6">
            <input id="estado"
                   name="estado"
                   type="text"
                   class="form-control"
                   [(ngModel)]="factura.estado"
                   disabled>
          </div>
        </div>
        
        <br>
        <div class="form-group row">
          <label for="total" class="col-sm-3 col-form-label">Total</label>
          <div class="col-sm-6">
            <input id="total"
                   name="total"
                   type="text"
                   class="form-control"
                   [(ngModel)]="factura.total"
                   disabled>
          </div>
        </div>
        
        
        <div class="card"
             [hidden]="_autenticacionRS.escliente(roles)"
        >
          
          
          <div class="col-md-12 float-right">
            
            <div class="row justify-content-md-center">
              <button type="button"
                      class="btn btn-success"
                      (click)="guardarDatosCabecera(tipoPagoOpc.value)"
                      [disabled]=" verificarEstado(factura.estado)">Guardar Datos
              </button>
            </div>
            <br>
            <div class="row justify-content-md-center">
              <a [routerLink]="['/home','addItem',factura.id]">
                <button type="button"
                        class="btn btn-secondary"
                        [hidden]="_autenticacionRS.escliente(roles)"
                        [disabled]="verificarEstado(factura.estado)"
                >AÃ±adir Item
                </button>
              </a>
            </div>
          </div>
        </div>
      </div>
      <!--Fin de la Fila -->
    </div>
    
    <!--Fila para Detalle de Factura -->
    <h5>Detalle de factura </h5>
    <div class="row">
      <div class="col-md-12">
        <div>
          <table class="table table-striped"
          
          >
            <tr>
              <th *ngFor="let col of columns" class="thead-dark">
                {{col}}
              </th>
            
            </tr>
            <tr *ngFor="let f of factura.detalles ">
              <td> {{f.id}} </td>
              <td> {{f.item}} </td>
              <td> {{f.cantidad}} </td>
              <td> {{f.precio}} </td>
              <td> {{f.total}}</td>
              <td>
                <button (click)="eliminarEventoHijo(f.id)"
                        [disabled]="_autenticacionRS.escliente(roles) || verificarEstado(factura.estado) "> X
                </button>
              </td>
            
            </tr>
          
          </table>
        </div>
        
        <div class="row justify-content-md-center">
          <button type="button"
                  class="btn btn-success "
                  [disabled]="_autenticacionRS.escliente(roles)"
                  [hidden]="verificarEstado(factura.estado)"
                  (click)="pagarFactura()"
          >Pagar Factura
          </button>
        </div>
      
      </div>
    </div>
    <!--Fin del contenedor-->
  </div>
</div>
</body>
